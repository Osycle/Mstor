<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" anycodings_javascript content="strict-origin-when-cross-origin">
  <title>Title</title>
  <meta name="google-signin-client_id"
        content="112042754498-i77fdo424752gdiebaiqqrte89cbicn8.apps.googleusercontent.com">
</head>
<script>
(function (factory) {
    typeof define === 'function' && define.amd ? define(factory) :
    factory();
}((function () { 'use strict';

    /**
     * The code was extracted from:
     * https://github.com/davidchambers/Base64.js
     */

    var chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

    function InvalidCharacterError(message) {
        this.message = message;
    }

    InvalidCharacterError.prototype = new Error();
    InvalidCharacterError.prototype.name = "InvalidCharacterError";

    function polyfill(input) {
        var str = String(input).replace(/=+$/, "");
        if (str.length % 4 == 1) {
            throw new InvalidCharacterError(
                "'atob' failed: The string to be decoded is not correctly encoded."
            );
        }
        for (
            // initialize result and counters
            var bc = 0, bs, buffer, idx = 0, output = "";
            // get next character
            (buffer = str.charAt(idx++));
            // character found in table? initialize bit storage and add its ascii value;
            ~buffer &&
            ((bs = bc % 4 ? bs * 64 + buffer : buffer),
                // and if not first of each 4 characters,
                // convert the first 8 bits to one ascii character
                bc++ % 4) ?
            (output += String.fromCharCode(255 & (bs >> ((-2 * bc) & 6)))) :
            0
        ) {
            // try to find character in table (0-63, not found => -1)
            buffer = chars.indexOf(buffer);
        }
        return output;
    }

    var atob = (typeof window !== "undefined" &&
        window.atob &&
        window.atob.bind(window)) ||
    polyfill;

    function b64DecodeUnicode(str) {
        return decodeURIComponent(
            atob(str).replace(/(.)/g, function(m, p) {
                var code = p.charCodeAt(0).toString(16).toUpperCase();
                if (code.length < 2) {
                    code = "0" + code;
                }
                return "%" + code;
            })
        );
    }

    function base64_url_decode(str) {
        var output = str.replace(/-/g, "+").replace(/_/g, "/");
        switch (output.length % 4) {
            case 0:
                break;
            case 2:
                output += "==";
                break;
            case 3:
                output += "=";
                break;
            default:
                throw "Illegal base64url string!";
        }

        try {
            return b64DecodeUnicode(output);
        } catch (err) {
            return atob(output);
        }
    }

    function InvalidTokenError(message) {
        this.message = message;
    }

    InvalidTokenError.prototype = new Error();
    InvalidTokenError.prototype.name = "InvalidTokenError";

    function jwtDecode(token, options) {
        if (typeof token !== "string") {
            throw new InvalidTokenError("Invalid token specified");
        }

        options = options || {};
        var pos = options.header === true ? 0 : 1;
        try {
            return JSON.parse(base64_url_decode(token.split(".")[pos]));
        } catch (e) {
            throw new InvalidTokenError("Invalid token specified: " + e.message);
        }
    }

    /*
     * Expose the function on the window object
     */

    //use amd or just through the window object.
    if (window) {
        if (typeof window.define == "function" && window.define.amd) {
            window.define("jwt_decode", function() {
                return jwtDecode;
            });
        } else if (window) {
            window.jwt_decode = jwtDecode;
        }
    }

})));
//# sourceMappingURL=jwt-decode.js.map

</script>
<body>
  <div id="my-signin"></div>
  <!-- <script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script> -->
  <!-- <script src="https://apis.google.com/js/api.js?onload=renderButton" async defer></script> -->

  <!-- <script src="https://apis.google.com/js/api:client.js" async defer></script> -->
  <div>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <!-- <div id="g_id_onload"
         data-client_id="112042754498-i77fdo424752gdiebaiqqrte89cbicn8.apps.googleusercontent.com"
         data-callback="handleCredentialResponse">
    </div>
    <div class="g_id_signin" data-type="standard"></div> -->
  </div>
  <div id="g_id_onload"
  data-client_id="112042754498-i77fdo424752gdiebaiqqrte89cbicn8.apps.googleusercontent.com"
  data-context="signin"
  data-ux_mode="popup"
  data-callback="handleCredentialResponse"
  data-auto_select="true">
</div>

<div class="g_id_signin"
  data-type="standard"
  data-shape="rectangular"
  data-theme="outline"
  data-text="signin_with"
  data-size="large"
  data-logo_alignment="left">
</div>
  <script>


    var cid = "112042754498-i77fdo424752gdiebaiqqrte89cbicn8.apps.googleusercontent.com"

    // function onSuccess(googleUser) {
    //   console.log("success");
    //   let profile = googleUser.getBasicProfile()
    //   console.log("Email: " + profile.getEmail())
    //   let token = googleUser.getAuthResponse().id_token
    //   console.log("Token: " + token)
    // }

    // function onFailure(error) {
    //   console.log("failure");
    //   console.info(error)
    // }
    // window.onload = function () {
    //   google.accounts.id.initialize({
    //     client_id: cid,
    //     type: "standart",
    //     callback: handleCredentialResponse
    //   });
    //   google.accounts.id.prompt();
    // };

    // "eyJhbGciOiJSUzI1NiIsImtpZCI6IjIwOWMwNTdkM2JkZDhjMDhmMmQ1NzM5Nzg4NjMyNjczZjdjNjI0MGYiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJuYmYiOjE2NjMyNDMwNzcsImF1ZCI6IjExMjA0Mjc1NDQ5OC1pNzdmZG80MjQ3NTJnZGllYmFpcXFydGU4OWNiaWNuOC5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsInN1YiI6IjEwNjY0Mzc2NDI0MDMwNzE1NDE3MSIsImVtYWlsIjoib3N5Y2xlQGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJhenAiOiIxMTIwNDI3NTQ0OTgtaTc3ZmRvNDI0NzUyZ2RpZWJhaXFxcnRlODljYmljbjguYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJuYW1lIjoi0JDQt9Cw0YIg0KTQtdCy0YDQsNC70YwiLCJwaWN0dXJlIjoiaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tL2EtL0FGZFp1Y28xd2M0SGV2OWNzUzFzSC1ULWZnU1V5cmJMRzhZZFdCckJQXzlhekE9czk2LWMiLCJnaXZlbl9uYW1lIjoi0JDQt9Cw0YIiLCJmYW1pbHlfbmFtZSI6ItCk0LXQstGA0LDQu9GMIiwiaWF0IjoxNjYzMjQzMzc3LCJleHAiOjE2NjMyNDY5NzcsImp0aSI6IjI0ZjQ1NjRmYjhiYmE0NjAxYjIwYTQ5YWM0YjQ0YWZiZTA4ZjVjMmMifQ.ZWoeECCRJcMZSclffTF98Jzll8BfmBUbClWrVEAuljB9laiahBTGJRNRZRfyfEMHRv08F9MpCXcqYarYiHk86dsyN0d_j_hdfVLRkVVroqa27lpYg5Oc6RYctmQKI_oQZwjZUq1UVtZz7C17Aowfh7tBus6upfdnYUf0wJIUVzw5iBP0EbgWVWdQU0_ewYf_yFV7UxlXhrT9uvIZ-A1NTq_hIkfMDAyQQevrMQHRPFrQFoR0mFLvmEHdSzFIIQMefbTJOY69iBuAfdfBEobJooIFF2udPv95uIv5aJNSUqOcO-OHS3k9ecxcFIFm9xdvtsN5KF8letnOj_ZC_Taf3A"
    function handleCredentialResponse(response){
      const responsePayload = jwt_decode(response.credential);
      console.log(response, responsePayload)
      console.log("ID: " + responsePayload.sub);
      console.log('Full Name: ' + responsePayload.name);
      console.log('Given Name: ' + responsePayload.given_name);
      console.log('Family Name: ' + responsePayload.family_name);
      console.log("Image URL: " + responsePayload.picture);
      console.log("Email: " + responsePayload.email);
    
      fetch("", {
        method: "POST",
        headers: {"Content-Type": "application/json;charset=UTF-8"},
        body: JSON.stringify({
            email: responsePayload.email,
            token: response.credential
        })
      })

    }
  </script>

  
</body>
</html>